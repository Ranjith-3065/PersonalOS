<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Account Security | PersonalOS</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-page: #F9FAFB;
    --sidebar-bg: #FFFFFF;
    --card-bg: #FFFFFF;
    --border: #E5E7EB;
    --text-main: #111827;
    --text-muted: #6B7280;
    --primary: #2563EB;
    --danger: #DC2626;
    --success: #059669;
    --warning: #D97706;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; }
  body { background: var(--bg-page); color: var(--text-main); display: flex; height: 100vh; overflow: hidden; }

  /* SIDEBAR */
  aside { width: 260px; background: var(--sidebar-bg); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 32px 16px; }
  .back-link { display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 600; color: var(--text-muted); text-decoration: none; margin-bottom: 40px; transition: color 0.2s; }
  .back-link:hover { color: var(--text-main); }
  .nav-group-label { font-size: 11px; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin: 0 12px 12px; }
  .nav-item { display: flex; align-items: center; padding: 10px 14px; font-size: 14px; font-weight: 500; color: var(--text-muted); text-decoration: none; border-radius: 8px; margin-bottom: 4px; transition: all 0.2s; }
  .nav-item:hover { background: #F3F4F6; color: var(--text-main); }
  .nav-item.active { background: #F3F4F6; color: var(--primary); font-weight: 600; }

  /* MAIN CONTENT */
  main { flex: 1; overflow-y: auto; padding: 64px 80px; }
  .header { margin-bottom: 48px; }
  .header h1 { font-size: 32px; font-weight: 700; letter-spacing: -0.03em; }
  .header p { font-size: 15px; color: var(--text-muted); margin-top: 6px; }

  .settings-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; max-width: 1000px; }

  /* CARDS */
  .card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 16px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.02); transition: transform 0.2s, box-shadow 0.2s; }
  .card:hover { box-shadow: 0 10px 15px -3px rgba(0,0,0,0.04); transform: translateY(-2px); }
  .card-header { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 16px; }
  .icon-box { width: 40px; height: 40px; background: #EFF6FF; color: var(--primary); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; }
  .card h3 { font-size: 16px; font-weight: 600; margin-bottom: 8px; }
  .card p { font-size: 13px; color: var(--text-muted); line-height: 1.6; margin-bottom: 24px; }

  /* LOGIN INFO FOOTER */
  .login-info-bar { grid-column: span 2; display: flex; justify-content: space-between; padding: 16px; background: #F3F4F6; border-radius: 12px; font-size: 12px; color: var(--text-muted); border: 1px solid var(--border); }

  /* BUTTONS */
  .btn { display: inline-flex; align-items: center; justify-content: center; padding: 8px 16px; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; transition: 0.2s; text-decoration: none; border: none; }
  .btn-primary { background: var(--text-main); color: #fff; }
  .btn-secondary { background: #fff; color: var(--text-main); border: 1px solid var(--border); }
  .btn-danger-outline { background: transparent; color: var(--danger); border: 1px solid #FEE2E2; }
  .btn-danger-outline:hover { background: #FFF5F5; }

  /* HERO */
  .account-hero { grid-column: span 2; background: #FFFFFF; border: 1px solid var(--border); border-radius: 20px; padding: 32px; display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
  .user-badge { display: flex; align-items: center; gap: 16px; }
  .initial-logo { width: 56px; height: 56px; background: var(--text-main); color: #fff; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 22px; font-weight: 700; }
  .status-pill { font-size: 11px; font-weight: 700; padding: 4px 10px; border-radius: 20px; text-transform: uppercase; margin-left: 8px; }
  .verified { background: #ECFDF5; color: var(--success); }
  .unverified { background: #FFF7ED; color: var(--warning); }

  /* DANGER AREA */
  .danger-section { grid-column: span 2; margin-top: 32px; padding: 24px; background: #FFF5F5; border: 1px solid #FEE2E2; border-radius: 16px; display: flex; justify-content: space-between; align-items: center; }
</style>
</head>
<body>

  <aside>
    <a href="/personalOS/dashboard" class="back-link">
      <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
      Dashboard
    </a>
    <div class="nav-group-label">Account</div>
    <a href="/personalOS/profile" class="nav-item">Personal Info</a>
    <a href="/personalOS/account" class="nav-item active">Security & Access</a>
    <a href="/personalOS/preferences" class="nav-item">Preferences</a>
  </aside>

  <main>
    <div class="header">
      <h1>Security & Access</h1>
      <p>Manage your credentials and monitor account activity.</p>
    </div>

    <div class="settings-grid">
      
      <div class="account-hero">
        <div class="user-badge">
          <div class="initial-logo" id="logo-letter">?</div>
          <div>
            <h2 id="acc-name" style="font-size: 18px; font-weight: 700;">Loading...</h2>
            <div style="display: flex; align-items: center; margin-top: 4px;">
                <p id="acc-email" style="font-size: 14px; color: var(--text-muted);">email@example.com</p>
                <span id="verify-badge" class="status-pill unverified">Unverified</span>
            </div>
          </div>
        </div>
        <button class="btn btn-secondary" onclick="requestVerification()">Verify Email</button>
      </div>

      <div class="card">
        <div class="card-header">
          <div class="icon-box">ðŸ”‘</div>
        </div>
        <h3>Change Password</h3>
        <p>Ensure your account is using a long, random password to stay secure.</p>
        <button class="btn btn-primary">Update Password</button>
      </div>

      <div class="card">
        <div class="card-header">
          <div class="icon-box">ðŸ’»</div>
        </div>
        <h3>Global Logout</h3>
        <p>Lost a device? Secure your account by logging out of all active web and mobile sessions.</p>
        <button class="btn btn-secondary" style="color: var(--danger);">Logout All Devices</button>
      </div>

      <div class="login-info-bar">
        <span>Account Status: <b id="status-text" style="color: var(--success);">Active</b></span>
        <span>Last login: <span id="last-login-time">December 23, 2025 â€¢ 10:42 AM</span></span>
      </div>

      <div class="danger-section">
        <div>
          <h4 style="font-size: 14px; font-weight: 700; color: #991B1B;">Deactivate Account</h4>
          <p style="font-size: 13px; color: #7F1D1D; margin-top: 2px;">This will disable your profile. You can reactivate by logging back in later.</p>
        </div>
        <button class="btn btn-danger-outline" onclick="softDelete()">Deactivate</button>
      </div>

    </div>
  </main>

  <script>
    async function init() {
      try {
        const res = await fetch('/personalOS/profile/data');
        const data = await res.json();
        
        if(data.success) {
          document.getElementById('acc-name').textContent = data.name;
          document.getElementById('acc-email').textContent = data.email;
          document.getElementById('logo-letter').textContent = data.name[0].toUpperCase();
          
          // Verification Status UI
          const badge = document.getElementById('verify-badge');
          if(data.isVerified) {
            badge.textContent = "Verified";
            badge.className = "status-pill verified";
          }

          // Last Login
          if(data.lastLogin) {
              const date = new Date(data.lastLogin);
              document.getElementById('last-login-time').textContent = date.toLocaleString();
          }

          // Account Status
          document.getElementById('status-text').textContent = data.isActive ? "Active" : "Inactive";
        }
      } catch (e) {
        console.log("Running in demo mode.");
      }
    }

    function softDelete() {
        if(confirm("Are you sure you want to deactivate your account? Your data will be hidden but not deleted.")) {
            // Logic to set isActive: false via API
            console.log("Deactivating...");
        }
    }

    function requestVerification() {
        alert("Verification link sent to your email!");
    }

    init();
  </script>
</body>
</html>